// TradingView Strategy Code

//@version=5
strategy("Optimized Strategy", overlay=true)

// Indicator settings
ema_length = input(9, title="EMA Length")
ema = ta.ema(close, ema_length)

// Entry logic
long_condition = ta.crossover(close, ema)
if (long_condition)
    strategy.entry("Long", strategy.long)

short_condition = ta.crossunder(close, ema)
if (short_condition)
    strategy.entry("Short", strategy.short)

// Exit logic
long_exit_condition = ta.crossunder(close, ema)
if (long_exit_condition)
    strategy.close("Long")

short_exit_condition = ta.crossover(close, ema)
if (short_exit_condition)
    strategy.close("Short")

// Performance optimizations
strategy.exit("Take Profit", from_entry="Long", limit=close * 1.01)
strategy.exit("Stop Loss", from_entry="Long", stop=close * 0.99)

// Plotting
ta.plot(ema, title="EMA", color=color.blue)